<!doctype html><html lang=en-au><head><meta charset=utf-8><meta name=viewport content="width=device-width"><script type=application/javascript src=https://www.beneathabstraction.com/js/theme-mode.js></script><link rel=stylesheet href=https://www.beneathabstraction.com/css/frameworks.min.css><link rel=stylesheet href=https://www.beneathabstraction.com/css/github.min.css><link rel=stylesheet href=https://www.beneathabstraction.com/css/github-style.css><link rel=stylesheet href=https://www.beneathabstraction.com/css/light.css><link rel=stylesheet href=https://www.beneathabstraction.com/css/dark.css><link rel=stylesheet href=https://www.beneathabstraction.com/css/syntax.css><title>Deploy Pihole on RaspberryPi ZeroW to adblock your home network - Beneath Abstraction</title>
<link rel=icon type=image/x-icon href=/images/github.png><meta name=theme-color content="#1e2327"><meta name=description content="Problem We all have seen and annoyed seeing those google ads or facebook ads on websites and apps. Mostly of the times the ads over takes the actual content of the website, especially on those forums. Ads also shows up on free email services, apps on your phones, smart tv, they are everywhere. More than annoyance, they eat up a lot of bandwidth and ofter makes the website/apps slower to respond."><meta name=keywords content='blog,techical blog,Microsoft .Net,Csharp,asp.net,docker,mvc,kubernetes,pulumi'><meta name=robots content="noodp"><link rel=canonical href=https://www.beneathabstraction.com/post/deploypihole/><meta name=twitter:card content="summary"><meta name=twitter:title content="Deploy Pihole on RaspberryPi ZeroW to adblock your home network - Beneath Abstraction"><meta name=twitter:description content="Problem We all have seen and annoyed seeing those google ads or facebook ads on websites and apps. Mostly of the times the ads over takes the actual content of the website, especially on those forums. Ads also shows up on free email services, apps on your phones, smart tv, they are everywhere. More than annoyance, they eat up a lot of bandwidth and ofter makes the website/apps slower to respond."><meta name=twitter:site content="https://www.beneathabstraction.com/"><meta name=twitter:creator content><meta name=twitter:image content="https://www.beneathabstraction.com/"><meta property="og:type" content="article"><meta property="og:title" content="Deploy Pihole on RaspberryPi ZeroW to adblock your home network - Beneath Abstraction"><meta property="og:description" content="Problem We all have seen and annoyed seeing those google ads or facebook ads on websites and apps. Mostly of the times the ads over takes the actual content of the website, especially on those forums. Ads also shows up on free email services, apps on your phones, smart tv, they are everywhere. More than annoyance, they eat up a lot of bandwidth and ofter makes the website/apps slower to respond."><meta property="og:url" content="https://www.beneathabstraction.com/post/deploypihole/"><meta property="og:site_name" content="Deploy Pihole on RaspberryPi ZeroW to adblock your home network"><meta property="og:image" content="https://www.beneathabstraction.com/"><meta property="og:image:width" content="2048"><meta property="og:image:height" content="1024"><meta property="article:published_time" content="2021-02-10 20:42:44 +1100 +1100"></head><body><div style=position:relative><header class="Header js-details-container Details px-3 px-md-4 px-lg-5 flex-wrap flex-md-nowrap open Details--on"><div class="Header-item mobile-none" style=margin-top:-4px;margin-bottom:-4px><a class=Header-link href=https://www.beneathabstraction.com/><img class=octicon height=32 width=32 src></a></div><div class="Header-item d-md-none"><button class="Header-link btn-link js-details-target" type=button onclick='document.querySelector("#header-search").style.display=document.querySelector("#header-search").style.display=="none"?"block":"none"'>
<img height=24 class="octicon octicon-three-bars" width=24 src></button></div><div style=display:none id=header-search class="Header-item Header-item--full flex-column flex-md-row width-full flex-order-2 flex-md-order-none mr-0 mr-md-3 mt-3 mt-md-0 Details-content--hidden-not-important d-md-flex"><div class="Header-search header-search flex-auto js-site-search position-relative flex-self-stretch flex-md-self-auto mb-3 mb-md-0 mr-0 mr-md-3 scoped-search site-scoped-search js-jump-to"><div class=position-relative><form target=_blank action=https://www.google.com/search accept-charset=UTF-8 method=get autocomplete=off><label class="Header-search-label form-control input-sm header-search-wrapper p-0 js-chromeless-input-container header-search-wrapper-jump-to position-relative d-flex flex-justify-between flex-items-center"><input type=text class="Header-search-input form-control input-sm header-search-input jump-to-field js-jump-to-field js-site-search-focus js-site-search-field is-clearable" name=q placeholder=Search autocomplete=off>
<input type=hidden name=q value=site:https://www.beneathabstraction.com/></label></form></div></div></div><div class="Header-item Header-item--full flex-justify-center d-md-none position-relative"><a class=Header-link href=https://www.beneathabstraction.com/><img class="octicon octicon-mark-github v-align-middle" height=32 width=32 src></a></div><div class=Header-item style=margin-right:0><a href=javascript:void(0) class="Header-link no-select" onclick=switchTheme()><svg style="fill:var(--color-profile-color-modes-toggle-moon)" class="no-select" viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" clip-rule="evenodd" d="M4.52208 7.71754c3.05612.0 5.53362-2.47748 5.53362-5.5336C10.0557 1.93498 10.0392 1.68986 10.0074 1.44961 9.95801 1.07727 10.3495.771159 10.6474.99992c1.4679 1.12724 2.4141 2.90007 2.4141 4.89391.0 3.40575-2.7609 6.16667-6.16665 6.16667-2.94151.0-5.40199-2.0595-6.018122-4.81523C.794841 6.87902 1.23668 6.65289 1.55321 6.85451 2.41106 7.40095 3.4296 7.71754 4.52208 7.71754z"/></svg></a></div></header></div><div><main><div class="gisthead pagehead bg-gray-light pb-0 pt-3 mb-4"><div class=px-0><div class="mb-3 d-flex px-3 px-md-3 px-lg-5"><div class="flex-auto min-width-0 width-fit mr-3"><div class=d-flex><div class="d-none d-md-block"><a class="avatar mr-2 flex-shrink-0" href=https://www.beneathabstraction.com/><img class=avatar-user src="https://avatars.githubusercontent.com/u/1662197?s=400&amp;u=d1fd525c38f21c760b5f73d3046d9cdee3debcc3&amp;v=4" width=32 height=32></a></div><div class="d-flex flex-column"><h1 class="break-word f3 text-normal mb-md-0 mb-1"><span class=author><a href=https://www.beneathabstraction.com/>Gopakumar</a>
</span><span class=path-divider>/</span>
<strong class="css-truncate css-truncate-target mr-1" style=max-width:410px><a href=https://www.beneathabstraction.com/post/deploypihole/>Deploy Pihole on RaspberryPi ZeroW to adblock your home network</a></strong></h1><div class="note m-0">Created <relative-time datetime="Wed, 10 Feb 2021 20:42:44 +1100" class=no-wrap>Wed, 10 Feb 2021 20:42:44 +1100</relative-time></div></div></div></div></div></div></div><div class="container-lg px-3 new-discussion-timeline"><div class="repository-content gist-content"><div><div class="js-gist-file-update-container js-task-list-container file-box"><div id=file-pytest class="file my-2"><div id=post-header class="file-header d-flex flex-md-items-center flex-items-start sticky-header" style=z-index:2><div class="file-info d-flex flex-md-items-center flex-items-start flex-order-1 flex-auto"><div class="text-mono f6 flex-auto pr-3 flex-order-2 flex-md-order-1 mt-2 mt-md-0"><summary id=toc-toggle onclick=clickToc() class="btn btn-octicon m-0 mr-2 p-2"><svg aria-hidden="true" viewBox="0 0 16 16" height="16" width="16" class="octicon octicon-list-unordered"><path fill-rule="evenodd" d="M2 4a1 1 0 100-2 1 1 0 000 2zm3.75-1.5a.75.75.0 000 1.5h8.5a.75.75.0 000-1.5h-8.5zm0 5a.75.75.0 000 1.5h8.5a.75.75.0 000-1.5h-8.5zm0 5a.75.75.0 000 1.5h8.5a.75.75.0 000-1.5h-8.5zM3 8A1 1 0 111 8a1 1 0 012 0zm-1 6a1 1 0 100-2 1 1 0 000 2z"/></svg></summary><details-menu class=SelectMenu id=toc-details style="display: none;"><div class="SelectMenu-modal rounded-3 mt-1" style=max-height:340px><div class="SelectMenu-list SelectMenu-list--borderless p-2" style=overscroll-behavior:contain id=toc-list></div></div></details-menu>849 Words</div><div class="file-actions flex-order-2 pt-0"><a class="muted-link mr-3" href=/tags/raspberrypi><svg class="octicon octicon-tag" viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M2.5 7.775V2.75a.25.25.0 01.25-.25h5.025a.25.25.0 01.177.073l6.25 6.25a.25.25.0 010 .354l-5.025 5.025a.25.25.0 01-.354.0l-6.25-6.25A.25.25.0 012.5 7.775zm-1.5.0V2.75C1 1.784 1.784 1 2.75 1h5.025c.464.0.91.184 1.238.513l6.25 6.25a1.75 1.75.0 010 2.474l-5.026 5.026a1.75 1.75.0 01-2.474.0l-6.25-6.25A1.75 1.75.0 011 7.775zM6 5a1 1 0 100 2 1 1 0 000-2z"/></svg>
RaspberryPi
</a><a class="muted-link mr-3" href=/tags/pi-hole><svg class="octicon octicon-tag" viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M2.5 7.775V2.75a.25.25.0 01.25-.25h5.025a.25.25.0 01.177.073l6.25 6.25a.25.25.0 010 .354l-5.025 5.025a.25.25.0 01-.354.0l-6.25-6.25A.25.25.0 012.5 7.775zm-1.5.0V2.75C1 1.784 1.784 1 2.75 1h5.025c.464.0.91.184 1.238.513l6.25 6.25a1.75 1.75.0 010 2.474l-5.026 5.026a1.75 1.75.0 01-2.474.0l-6.25-6.25A1.75 1.75.0 011 7.775zM6 5a1 1 0 100 2 1 1 0 000-2z"/></svg>
Pi hole
</a><a class="muted-link mr-3" href=/tags/adblocking><svg class="octicon octicon-tag" viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M2.5 7.775V2.75a.25.25.0 01.25-.25h5.025a.25.25.0 01.177.073l6.25 6.25a.25.25.0 010 .354l-5.025 5.025a.25.25.0 01-.354.0l-6.25-6.25A.25.25.0 012.5 7.775zm-1.5.0V2.75C1 1.784 1.784 1 2.75 1h5.025c.464.0.91.184 1.238.513l6.25 6.25a1.75 1.75.0 010 2.474l-5.026 5.026a1.75 1.75.0 01-2.474.0l-6.25-6.25A1.75 1.75.0 011 7.775zM6 5a1 1 0 100 2 1 1 0 000-2z"/></svg>
AdBlocking
</a><a class="muted-link mr-3" href=/tags/tracker-blocking><svg class="octicon octicon-tag" viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M2.5 7.775V2.75a.25.25.0 01.25-.25h5.025a.25.25.0 01.177.073l6.25 6.25a.25.25.0 010 .354l-5.025 5.025a.25.25.0 01-.354.0l-6.25-6.25A.25.25.0 012.5 7.775zm-1.5.0V2.75C1 1.784 1.784 1 2.75 1h5.025c.464.0.91.184 1.238.513l6.25 6.25a1.75 1.75.0 010 2.474l-5.026 5.026a1.75 1.75.0 01-2.474.0l-6.25-6.25A1.75 1.75.0 011 7.775zM6 5a1 1 0 100 2 1 1 0 000-2z"/></svg>
Tracker Blocking
</a><a class="muted-link mr-3" href=/tags/networking><svg class="octicon octicon-tag" viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M2.5 7.775V2.75a.25.25.0 01.25-.25h5.025a.25.25.0 01.177.073l6.25 6.25a.25.25.0 010 .354l-5.025 5.025a.25.25.0 01-.354.0l-6.25-6.25A.25.25.0 012.5 7.775zm-1.5.0V2.75C1 1.784 1.784 1 2.75 1h5.025c.464.0.91.184 1.238.513l6.25 6.25a1.75 1.75.0 010 2.474l-5.026 5.026a1.75 1.75.0 01-2.474.0l-6.25-6.25A1.75 1.75.0 011 7.775zM6 5a1 1 0 100 2 1 1 0 000-2z"/></svg>
Networking</a></div></div></div><div class="Box-body px-5 pb-5" style=z-index:1><article class="markdown-body entry-content container-lg"><h2 id=problem>Problem</h2><p>We all have seen and annoyed seeing those google ads or facebook ads on websites and apps. Mostly of the times the ads over takes the actual content of the website, especially on those forums. Ads also shows up on free email services, apps on your phones, smart tv, they are everywhere. More than annoyance, they eat up a lot of bandwidth and ofter makes the website/apps slower to respond. There are ad blockers available for your browsers, but that just solves the problem on that device, but devices like smart tv doesn&rsquo;t have an easy way to block ad on the device.</p><h2 id=solution>Solution</h2><p>The one solution that can remove ads from every device on your home network is to install an ad blocker to your network. Simple and cheap yet effective solution is to use a free, open-source software called Pihole on your network. Here is how pihole works, you need to install pihole on a device on your device and channel all your internet traffic from your network to pihole. Pihole cross references the request from your device with the list of ad servers that it has an if it finds a match it blocks the request, else it will let the request through to thn internet and you get served with the website that you were looking for. By block the ad requests, you browser or apps does not get the ad content, hence does not show an ad or shows a blank space. More about <a href=https://pi-hole.net/>Pihole here</a>.</p><h2 id=installation>Installation</h2><p>Pihole software is so light weight that it can be installed on a single board computer like raspberry pi. I have chosen the lowest Pi available Raspberry Pi Zero W, which has a built in wifi support.</p><p><strong>Things you need for below setup</strong></p><ul><li>Raspberry Pi Zero W</li><li>Micro SD card 16gb</li><li>MicroSD Card reader</li><li>USB power supply for Pi Zero W</li></ul><p><strong>Step 1 Installing OS</strong>
Pi requires an OS that can run pihole software. Pihole supports a lot of linux distribution, i choose Raspbian OS (now known as Raspberry PI OS). We will need a micro SD card, atleast 16GB. Plug the micros sd card into a computer using a card reader and download the raspberry pi imager from <a href=https://www.raspberrypi.org/software/>raspberrypi.org</a> and use the software to flash the micro-sd card with the OS. For more advanced users the website gives a manual installation option too.</p><p><strong>Step 2 Enable Remote access and SSH</strong>
We need to configure Pi zero W to access the pizero w over wifi and to access it using SSH to install software and access pihole UI. While the sd card is plugged in to the computer (you might have to remove and add the sd card after installation of OS) you need to do two things</p><ul><li>Add a file named <em>ssh</em> (without any extension) to the drive or partition called boot on your SD Card. This will enable SSH connection to your PI.</li><li>Add a file named <em>wpa_supplicant.conf</em> to the same boot partition with the below content<pre tabindex=0><code>ctrl_interface=DIR=/var/run/wpa_supplicant GROUP=netdev
update_config=1
country=&lt;Insert 2 letter ISO 3166-1 country code here&gt;

network={
    ssid=&#34;&lt;Name of your wireless LAN&gt;&#34;
    psk=&#34;&lt;Password for your wireless LAN&gt;&#34;
}
</code></pre></li></ul><p>now the SD card can be installed into the raspberry pi and connect raspberry to USB power. Once powered on you can use SSH to connect into the Pi terminal. Default username is <em>pi</em> and password is <em>raspberry</em></p><p><strong>Step 3 Install Pihole</strong>
Installing Pihole is as easy as typing in the command <em>curl -sSL <a href=https://install.pi-hole.net>https://install.pi-hole.net</a> | bash</em> into the pi terminal and run through the steps. Alternate ways and further configuration guide to installation can be found at <a href=https://github.com/pi-hole/pi-hole/#one-step-automated-install>Pihole github page</a>. You can also setup the password for pihole admin console.</p><p><strong>Step 4 Hooking up Pi to the network</strong>
Once the pihole is installed and Pi is up and running, configure your router to have the Pi configured with static ip address within your network.
Next step is to configure your routers DNS server Ip address to your PIs static IP address. This means the all the requests from devices in your network will be sent to the PI by the router for DNS resolution.
Pihole will get these requests and will block those request to domains that is marked as adserver in its list.
If you type in the IP address of the pi onto your browser of any device on the network, it will load the pihole page and you can load the admin page which shows the request from devices and requests that were blocked in a beautiful dashboard, like below.</p><p><img src=/blogimages/piholedashboard.png alt="Pihole dashboard"></p><p>You can even login to the admin account to further view detailed data and configure a lot more on your pihole. More about configuration and setup can be found at <a href=https://docs.pi-hole.net/>pihole documentation</a></p><p>This setup solves ad problems on your home or private network, or the network that uses the router that has Pi configured as DNS server. If you want ad blocking on your even outside your network then you can even configure VPN on your pihole and your device. More about <a href=https://docs.pi-hole.net/guides/vpn/openvpn/overview/>VPN connection can be found on pihole documentation</a></p></article></div></div></div></div></div></div></main></div><script type=application/javascript src=https://www.beneathabstraction.com/js/toc.js></script><link rel=stylesheet href=https://www.beneathabstraction.com/css/toc.css><div class="footer container-xl width-full p-responsive"><div class="position-relative d-flex flex-row-reverse flex-lg-row flex-wrap flex-lg-nowrap flex-justify-center flex-lg-justify-between flex-sm-items-center pt-6 pb-2 mt-6 f6 text-gray border-top border-gray-light"><a aria-label=Homepage title=GitHub class="footer-octicon d-none d-lg-block mr-lg-4" href=https://www.beneathabstraction.com/><svg height="24" class="octicon octicon-mark-github" viewBox="0 0 16 16" width="24"><path fill-rule="evenodd" d="M8 0C3.58.0.0 3.58.0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38.0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95.0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12.0.0.67-.21 2.2.82.64-.18 1.32-.27 2-.27s1.36.09 2 .27c1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15.0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48.0 1.07-.01 1.93-.01 2.2.0.21.15.46.55.38A8.013 8.013.0 0016 8c0-4.42-3.58-8-8-8z"/></svg></a><ul class="list-style-none d-flex flex-wrap col-12 flex-justify-center flex-lg-justify-between mb-2 mb-lg-0"><li class="mr-3 mr-lg-0">Theme by <a href=https://github.com/MeiK2333/github-style>github-style</a></li></ul></div><div class="d-flex flex-justify-center pb-6"><span class="f6 text-gray-light"></span></div></div></body><script type=application/javascript src=https://www.beneathabstraction.com/js/github-style.js></script></html>